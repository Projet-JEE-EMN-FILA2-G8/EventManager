--<ScriptOptions statementTerminator=";"/>

ALTER TABLE REGISTRATION DROP CONSTRAINT FOREIGN_KEY_EVENTS;

ALTER TABLE REGISTRATION DROP CONSTRAINT FOREIGN_KEY_PARTICIPANTS;

ALTER TABLE EVENTS DROP CONSTRAINT FOREIGN_KEY_HOTE;

ALTER TABLE REGISTRATION DROP CONSTRAINT SQL141019171711040;

ALTER TABLE EVENTS DROP CONSTRAINT PRIMARY_KEY_EVENTS;

ALTER TABLE PARTICIPANTS DROP CONSTRAINT PRIMARY_KEY;

ALTER TABLE USERS DROP CONSTRAINT SQL141019170134160;

DROP INDEX SQL141019170134160;

DROP INDEX SQL141019190319350;

DROP INDEX SQL141019171711040;

DROP INDEX SQL141019191400500;

DROP INDEX SQL141019191245460;

DROP INDEX SQL141019190636250;

DROP INDEX SQL141019191336810;

DROP INDEX SQL141019191245461;

DROP TABLE USERS;

DROP TABLE PARTICIPANTS;

DROP TABLE REGISTRATION;

DROP TABLE EVENTS;

CREATE TABLE USERS (
		EMAIL VARCHAR(30) NOT NULL,
		PWD VARCHAR(16) NOT NULL
	);

CREATE TABLE PARTICIPANTS (
		ID INTEGER GENERATED ALWAYS AS IDENTITY  (START WITH 1 ,INCREMENT BY 28),
		NOM VARCHAR(24) NOT NULL,
		PRENOM VARCHAR(24) NOT NULL,
		EMAIL VARCHAR(30) NOT NULL,
		SOCIETE VARCHAR(24)
	);

CREATE TABLE REGISTRATION (
		IDEVENT INTEGER NOT NULL,
		IDPARTICIPANT INTEGER NOT NULL
	);

CREATE TABLE EVENTS (
		ID INTEGER GENERATED ALWAYS AS IDENTITY  (START WITH 1 ,INCREMENT BY 63),
		HOTE VARCHAR(30) NOT NULL,
		ADRESSE VARCHAR(100) NOT NULL,
		DATEDEB DATE NOT NULL,
		DATEFIN DATE NOT NULL,
		NOM VARCHAR(50) NOT NULL,
		DESCRIPTION VARCHAR(100),
		VISIBLE SMALLINT NOT NULL
	);

CREATE UNIQUE INDEX SQL141019170134160 ON USERS (EMAIL ASC);

CREATE UNIQUE INDEX SQL141019190319350 ON PARTICIPANTS (ID ASC);

CREATE UNIQUE INDEX SQL141019171711040 ON REGISTRATION (IDEVENT ASC, IDPARTICIPANT ASC);

CREATE INDEX SQL141019191400500 ON REGISTRATION (IDPARTICIPANT ASC);

CREATE UNIQUE INDEX SQL141019191245460 ON EVENTS (ID ASC);

CREATE UNIQUE INDEX SQL141019190636250 ON PARTICIPANTS (EMAIL ASC);

CREATE INDEX SQL141019191336810 ON REGISTRATION (IDEVENT ASC);

CREATE INDEX SQL141019191245461 ON EVENTS (HOTE ASC);

ALTER TABLE REGISTRATION ADD CONSTRAINT SQL141019171711040 PRIMARY KEY (IDEVENT, IDPARTICIPANT);

ALTER TABLE EVENTS ADD CONSTRAINT PRIMARY_KEY_EVENTS PRIMARY KEY (ID);

ALTER TABLE PARTICIPANTS ADD CONSTRAINT PRIMARY_KEY PRIMARY KEY (ID);

ALTER TABLE USERS ADD CONSTRAINT SQL141019170134160 PRIMARY KEY (EMAIL);

ALTER TABLE REGISTRATION ADD CONSTRAINT FOREIGN_KEY_EVENTS FOREIGN KEY (IDEVENT)
	REFERENCES EVENTS (ID);

ALTER TABLE REGISTRATION ADD CONSTRAINT FOREIGN_KEY_PARTICIPANTS FOREIGN KEY (IDPARTICIPANT)
	REFERENCES PARTICIPANTS (ID);

ALTER TABLE EVENTS ADD CONSTRAINT FOREIGN_KEY_HOTE FOREIGN KEY (HOTE)
	REFERENCES USERS (EMAIL);
